# 5.8.2 评价

Some advantages of top-down regular expression matching are obvious: the algo- rithm is very easy to program and involves no or hardly any preprocessing of the regular expression, depending on the implementation of structuring routines like after_subexpression(). Other advantages are less directly visible. For ex- ample, the technique allows naming a part of the regular expression and checking its repeated presence somewhere else in the input; this is an unexpectedly powerful feature. A simple example is the pattern (.*)=x\x, which says: match an arbitrary segment of the input, call it x, and then match the rest of the input to whatever has been recognized for x; \x is called a backreference. (A more usual but less clear notation for the same regular expression is \(.*\)\1, in which \1 means: match the first subexpression enclosed in \( and \).)

Faced with the input abab, the recognizer sets x to the values ε, a, ab, aba, and abab in any order, and then tries to match the tail left over in each case to the present value of x. This succeeds only for x=ε and x=ab, and only in the last case is the whole input recognized. So the above expression recognizes the language of all strings that consist of two identical parts: ww, where w is any string over the given alphabet. Since this is a context-sensitive language, we see to our amazement that, skipping the entire Type 2 languages, the Type 3 regular expressions with backrefer- ences recognize a Type 1 language! A system which uses this feature extensively is the §-calculus (Jackson [285, 291]), discussed further in Section 15.8.3.

The main disadvantage of top-down regular expression recognition is its time requirements. Although they are usually linear with a very modest multiplication constant, they can occasionally be disturbingly high, especially at unexpected mo- ments. O(nk) time requirement occur with patterns like a∗a∗ ···a∗, where the a∗ is repeated k times, so in principle the cost can be any polynomial in the length of the input, but behavior worse than quadratic is unusual. Finding all 10000 occurrences of lines matching the expression .*) in this book took 36 sec.; finding all 11000 occurrences of just the ) took no measurable time.