# 4.2.8 Getting Parse-Forest Grammars from CYK Parsing

As with Unger parsers, it is quite simple to obtain a parse-forest grammar during CYK parsing: whenever a non-terminal A is entered into entry Ri,l of the recognition table because there is a rule A→BC and B is in Ri,k and C is in Ri+k,l−k, the rule

*A_i_l ---> B_i_k C_m_n*

is added to the parse-forest grammar, where m = i+k and n = i+l−k.

There are two things to note here. The first is that this algorithm will never introduce undefined non-terminals: a rule A_i_l--->B_i_k C_m_n is added only when it is guaranteed that rules for B_i_k and C_m_n exist. On the other hand, such a rule is added without any regard to its reachability: the non-terminal A_i_l may be reachable from the start symbol or it may not; it is just too early to tell. We see that CYK parsing, being a bottom-up algorithm, creates a lot of unreachable non-terminals; these represent finds of the bottom-up process that led nowhere.

The second is that the parse-forest grammar contains more information than the recognition table, since it not only records for each non-terminal in a given entry that it is there but also why it is there. The parse-forest grammar combines the recognition phase (Section 4.2.2) and the parsing phase (Section 4.2.5) of the CYK parsing process.

Obtaining the parse-forest grammar from Figure 4.17 and the grammar from Figure 4.6 is straightforward; the result is in Figure 4.18. We see that it contains many unreachable non-terminals, for example Number_2_6, Scale_5_0, etc. Removing these yields the parse-forest grammar of Figure 4.19; it is easy to see that it is equivalent to the one derivation found at the end of Section 4.2.6.